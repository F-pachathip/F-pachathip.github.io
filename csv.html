<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AI Color & Nitrate Detector - CSV Viewer</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet"/>
  <style id="critical-style">*{box-sizing:border-box} html,body{margin:0}
body{font-family:'Kanit',system-ui,Arial,sans-serif;background:#0b1220;color:#e7eaf1}
.header{padding:16px 20px;text-align:center;font-weight:700}
.content{padding:24px}</style>
  <link id="site-style" rel="stylesheet" href="./style.css?v=20250902">
  <script>(function(){
  const link = document.getElementById('site-style');
  const kill = () => { const c = document.getElementById('critical-style'); if (c) c.remove(); };
  if (link) {
    link.addEventListener('load', kill);
    setTimeout(kill, 2000);
  } else {
    setTimeout(kill, 1500);
  }
})();</script>
</head>
<body>
  <aside class="navbar">
    <div class="brand">
      <div class="brand-mark"><span class="material-symbols-rounded">science</span></div>
      <div class="brand-text"><strong>AI Nitrate</strong><small>Detector Suite</small></div>
    </div>
    <button class="hamburger" onclick="toggleMenu()" aria-label="Menu"><span></span><span></span><span></span></button>
    <ul class="navlist">
      <li><a href="index.html"><span class="material-symbols-rounded">home</span> Home</a></li>
      <li><a href="analysis.html"><span class="material-symbols-rounded">colorize</span> Analysis</a></li>
      <li><a href="reports.html"><span class="material-symbols-rounded">analytics</span> Reports</a></li>
      <li><a class="active-link" href="csv.html"><span class="material-symbols-rounded">table</span> CSV</a></li>
    </ul>
    <div class="lang"><button id="languageToggle" class="btn chip">ภาษาไทย</button></div>
  </aside>
  <header class="header glass">
    <h1 id="headerText_csv">CSV Viewer</h1>
  </header>

  <main class="content container">
    <section class="card">
      <h2 id="csvTitle">Open and Explore CSV</h2>
      <p id="csvDesc" class="muted">Upload a CSV file, then search, sort, paginate, and download filtered results.</p>

      <div class="form-row" style="margin-top:8px; gap:12px; align-items:flex-end; flex-wrap:wrap">
        <label class="form-label">
          <span class="material-symbols-rounded" aria-hidden="true">upload_file</span>
          <span id="csvUploadLabel">Choose CSV</span>
          <input id="csvFileInput" type="file" accept=".csv,text/csv" style="display:block; margin-top:6px"/>
        </label>

        <label class="form-label">
          <span id="csvRowsPerPageLabel">Rows / page:</span>
          <select id="rowsPerPage" style="margin-left:8px; min-width:110px">
            <option>10</option><option>25</option><option selected>50</option><option>100</option>
          </select>
        </label>

        <label class="form-label" style="flex:1; min-width:220px">
          <span class="material-symbols-rounded" aria-hidden="true">search</span>
          <input id="searchInput" type="text" placeholder="Search..." style="width:100%; margin-top:6px"/>
        </label>

        <button id="downloadBtn" class="btn btn-outline"><span class="material-symbols-rounded">download</span> <span id="csvDownloadBtn">Download CSV</span></button>
        <button id="clearBtn" class="btn btn-ghost"><span class="material-symbols-rounded">delete</span> <span id="csvClearBtn">Clear</span></button>
      </div>
    </section>

    <section class="card soft" style="margin-top:16px">
      <div id="tableWrap" class="table-wrap">
        <table id="csvTable" aria-live="polite">
          <thead id="csvThead"></thead>
          <tbody id="csvTbody"></tbody>
        </table>
      </div>
      <div id="emptyState" class="muted" style="padding:16px; display:none">No data yet.</div>

      <div class="form-row" style="margin-top:12px; justify-content:space-between">
        <div id="pageInfo" class="small muted">Page 1 / 1</div>
        <div>
          <button id="prevPage" class="btn btn-outline"><span class="material-symbols-rounded">chevron_left</span> Prev</button>
          <button id="nextPage" class="btn btn-outline">Next <span class="material-symbols-rounded">chevron_right</span></button>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    &copy; <span id="currentYear"></span> AI Color & Nitrate Detector. All Rights Reserved.
  </footer>

  <!-- Only one script now: merged logic -->
  <script src="script.js"></script>
</body>
</html>
